{% extends 'simple_base.html' %}

{% block title %}Dashboard - Investment Thesis Intelligence System{% endblock %}

{% block header %}Dashboard{% endblock %}

{% block content %}
<!-- System Overview Cards -->
<div class="row mb-3">
    <div class="col">
        <div class="card text-center">
            <div class="metric-value text-primary">{{ recent_analyses|length if recent_analyses else 0 }}</div>
            <h6>Total Analyses</h6>
            <small class="text-muted">Active thesis analyses</small>
        </div>
    </div>
    <div class="col">
        <div class="card text-center">
            <div class="metric-value text-success">{{ active_signals if active_signals else 0 }}</div>
            <h6>Active Signals</h6>
            <small class="text-muted">Currently monitoring</small>
        </div>
    </div>
    <div class="col">
        <div class="card text-center">
            <div class="metric-value text-warning">{{ recent_notifications|length if recent_notifications else 0 }}</div>
            <h6>Recent Alerts</h6>
            <small class="text-muted">Last 24 hours</small>
        </div>
    </div>
</div>

<!-- Quick Actions -->
<div class="card">
    <h5>Quick Actions</h5>
    <div class="mt-3">
        <a href="/analysis" class="btn">Start New Analysis</a>
        <a href="/monitoring" class="btn" style="margin-left: 10px;">View Monitoring</a>
        <a href="/analytics" class="btn" style="margin-left: 10px;">Analytics Dashboard</a>
    </div>
</div>

<!-- Recent Analyses -->
{% if recent_analyses %}
<div class="card">
    <h5>Recent Analyses</h5>
    {% for analysis in recent_analyses %}
    <div style="border-bottom: 1px solid #eee; padding: 10px 0;">
        <strong>{{ analysis.title }}</strong>
        <small class="text-muted" style="display: block;">{{ analysis.created_at.strftime('%Y-%m-%d %H:%M') }}</small>
        <p style="margin: 5px 0;">{{ analysis.core_claim[:100] }}...</p>
    </div>
    {% endfor %}
</div>
{% endif %}

<!-- System Status -->
<div class="card">
    <h5>System Status</h5>
    <div style="display: flex; gap: 20px; align-items: center;">
        <div>
            <span style="color: #28a745;">●</span> Application Server: Online
        </div>
        <div>
            <span style="color: #28a745;">●</span> Database: Connected
        </div>
        <div>
            <span style="color: #ffc107;">●</span> AI Services: Available (Mock Mode)
        </div>
    </div>
</div>
{% endblock %}